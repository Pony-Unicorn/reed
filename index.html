<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light" />
    <title>Reed</title>
    <meta
      name="description"
      content="Secure peer-to-peer transfer tool for end-to-end encrypted transmission of passwords, private keys, mnemonics, and files"
    />

    <!-- SEO & Meta -->
    <meta
      name="keywords"
      content="end-to-end encryption,secure transfer,p2p,password sharing,private key transfer"
    />
    <meta name="author" content="Reed Contributors" />

    <!-- Security & Privacy -->
    <meta name="referrer" content="no-referrer" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Reed â€” End-to-End Encrypted Transfer" />
    <meta
      property="og:description"
      content="By encrypting one end to generate a QR code and scanning the code to decrypt it on the other end, point-to-point secure transmission without the need for a network or a transfer server is achieved."
    />
    <meta property="og:url" content="https://reed.testbug.cc" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Reed â€” End-to-End Encrypted Transfer" />
    <meta
      name="twitter:description"
      content="By encrypting one end to generate a QR code and scanning the code to decrypt it on the other end, point-to-point secure transmission without the need for a network or a transfer server is achieved."
    />
    <!-- Performance -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="https://cdn.jsdelivr.net/gh/Pony-Unicorn/reed/favicon.ico"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="https://cdn.jsdelivr.net/gh/Pony-Unicorn/reed/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="https://cdn.jsdelivr.net/gh/Pony-Unicorn/reed/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://cdn.jsdelivr.net/gh/Pony-Unicorn/reed/apple-touch-icon.png"
    />

    <style>
      /* ========================================
         CSS Variables - Color System
         Based on logo.png colors
         ======================================== */
      :root {
        /* Primary - Blue (from water waves) */
        --primary-50: #eff6ff;
        --primary-100: #dbeafe;
        --primary-200: #bfdbfe;
        --primary-300: #93c5fd;
        --primary-400: #60a5fa;
        --primary-500: #3b82f6;
        --primary-600: #2563eb;
        --primary-700: #1d4ed8;
        --primary-800: #1e40af;
        --primary-900: #1e3a8a;

        /* Accent - Green (from reed leaves) */
        --accent-50: #ecfdf5;
        --accent-100: #d1fae5;
        --accent-200: #a7f3d0;
        --accent-300: #6ee7b7;
        --accent-400: #34d399;
        --accent-500: #10b981;
        --accent-600: #059669;
        --accent-700: #047857;
        --accent-800: #065f46;
        --accent-900: #064e3b;

        /* Neutral - Brown/Gray (from reed stems) */
        --neutral-50: #fafaf9;
        --neutral-100: #f5f5f4;
        --neutral-200: #e7e5e4;
        --neutral-300: #d6d3d1;
        --neutral-400: #a8a29e;
        --neutral-500: #78716c;
        --neutral-600: #57534e;
        --neutral-700: #44403c;
        --neutral-800: #292524;
        --neutral-900: #1c1917;

        /* Semantic Colors */
        --background: var(--neutral-50);
        --foreground: var(--neutral-900);
        --surface: #ffffff;
        --border: var(--neutral-200);

        /* Functional Colors */
        --success: var(--accent-500);
        --warning: #f59e0b;
        --error: #ef4444;
        --info: var(--primary-500);

        /* Spacing */
        --spacing-xs: 0.25rem;
        --spacing-sm: 0.5rem;
        --spacing-md: 1rem;
        --spacing-lg: 1.5rem;
        --spacing-xl: 2rem;
        --spacing-2xl: 3rem;

        /* Border Radius */
        --radius-sm: 0.25rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-full: 9999px;

        /* Shadows */
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }

      /* ========================================
         Reset & Base Styles
         ======================================== */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        line-height: 1.6;
        color: var(--foreground);
        background-color: var(--background);
        min-height: 100vh;
      }

      /* ========================================
         Layout Utilities
         ======================================== */
      .flex {
        display: flex;
      }

      .flex-col {
        flex-direction: column;
      }

      .flex-wrap {
        flex-wrap: wrap;
      }

      .items-center {
        align-items: center;
      }

      .items-start {
        align-items: flex-start;
      }

      .items-end {
        align-items: flex-end;
      }

      .justify-center {
        justify-content: center;
      }

      .justify-between {
        justify-content: space-between;
      }

      .justify-around {
        justify-content: space-around;
      }

      .gap-xs {
        gap: var(--spacing-xs);
      }
      .gap-sm {
        gap: var(--spacing-sm);
      }
      .gap-md {
        gap: var(--spacing-md);
      }
      .gap-lg {
        gap: var(--spacing-lg);
      }
      .gap-xl {
        gap: var(--spacing-xl);
      }

      .grid {
        display: grid;
      }

      .grid-cols-1 {
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
      .grid-cols-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      /* ========================================
         Spacing Utilities
         ======================================== */
      .p-xs {
        padding: var(--spacing-xs);
      }
      .p-sm {
        padding: var(--spacing-sm);
      }
      .p-md {
        padding: var(--spacing-md);
      }
      .p-lg {
        padding: var(--spacing-lg);
      }
      .p-xl {
        padding: var(--spacing-xl);
      }
      .p-2xl {
        padding: var(--spacing-2xl);
      }

      .m-auto {
        margin: auto;
      }
      .mt-md {
        margin-top: var(--spacing-md);
      }
      .mt-lg {
        margin-top: var(--spacing-lg);
      }
      .mb-md {
        margin-bottom: var(--spacing-md);
      }
      .mb-lg {
        margin-bottom: var(--spacing-lg);
      }

      /* ========================================
         Typography
         ======================================== */
      .text-xs {
        font-size: 0.75rem;
      }
      .text-sm {
        font-size: 0.875rem;
      }
      .text-base {
        font-size: 1rem;
      }
      .text-lg {
        font-size: 1.125rem;
      }
      .text-xl {
        font-size: 1.25rem;
      }
      .text-2xl {
        font-size: 1.5rem;
      }
      .text-3xl {
        font-size: 1.875rem;
      }

      .font-medium {
        font-weight: 500;
      }
      .font-semibold {
        font-weight: 600;
      }
      .font-bold {
        font-weight: 700;
      }

      .text-center {
        text-align: center;
      }

      /* ========================================
         Button Component with Variants
         ======================================== */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm) var(--spacing-lg);
        font-size: 1rem;
        font-weight: 500;
        line-height: 1.5;
        border-radius: var(--radius-md);
        border: 2px solid transparent;
        cursor: pointer;
        transition: all 0.2s ease;
        text-decoration: none;
        white-space: nowrap;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .btn-sm {
        padding: var(--spacing-xs) var(--spacing-md);
        font-size: 0.875rem;
      }

      .btn-lg {
        padding: var(--spacing-md) var(--spacing-xl);
        font-size: 1.125rem;
      }

      /* Primary Button Variants */
      .btn-primary-solid {
        background-color: var(--primary-600);
        color: white;
      }
      .btn-primary-solid:hover:not(:disabled) {
        background-color: var(--primary-700);
      }

      .btn-primary-soft {
        background-color: var(--primary-100);
        color: var(--primary-700);
      }
      .btn-primary-soft:hover:not(:disabled) {
        background-color: var(--primary-200);
      }

      .btn-primary-outline {
        background-color: transparent;
        color: var(--primary-600);
        border-color: var(--primary-600);
      }
      .btn-primary-outline:hover:not(:disabled) {
        background-color: var(--primary-50);
      }

      /* Accent Button Variants */
      .btn-accent-solid {
        background-color: var(--accent-600);
        color: white;
      }
      .btn-accent-solid:hover:not(:disabled) {
        background-color: var(--accent-700);
      }

      .btn-accent-soft {
        background-color: var(--accent-100);
        color: var(--accent-700);
      }
      .btn-accent-soft:hover:not(:disabled) {
        background-color: var(--accent-200);
      }

      .btn-accent-outline {
        background-color: transparent;
        color: var(--accent-600);
        border-color: var(--accent-600);
      }
      .btn-accent-outline:hover:not(:disabled) {
        background-color: var(--accent-50);
      }

      /* Neutral Button Variants */
      .btn-neutral-solid {
        background-color: var(--neutral-600);
        color: white;
      }
      .btn-neutral-solid:hover:not(:disabled) {
        background-color: var(--neutral-700);
      }

      .btn-neutral-soft {
        background-color: var(--neutral-100);
        color: var(--neutral-700);
      }
      .btn-neutral-soft:hover:not(:disabled) {
        background-color: var(--neutral-200);
      }

      .btn-neutral-outline {
        background-color: transparent;
        color: var(--neutral-600);
        border-color: var(--neutral-600);
      }
      .btn-neutral-outline:hover:not(:disabled) {
        background-color: var(--neutral-50);
      }

      /* ========================================
         Card Component
         ======================================== */
      .card {
        background-color: var(--surface);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        box-shadow: var(--shadow-sm);
        padding: var(--spacing-lg);
      }

      .card-hover {
        transition: all 0.2s ease;
      }

      .card-hover:hover {
        box-shadow: var(--shadow-md);
        transform: translateY(-2px);
      }

      /* ========================================
         Input Component
         ======================================== */
      .input {
        width: 100%;
        padding: var(--spacing-sm) var(--spacing-md);
        font-size: 1rem;
        line-height: 1.5;
        color: var(--foreground);
        background-color: var(--surface);
        border: 2px solid var(--border);
        border-radius: var(--radius-md);
        transition: all 0.2s ease;
      }

      .input:focus {
        outline: none;
        border-color: var(--primary-500);
        box-shadow: 0 0 0 3px var(--primary-100);
      }

      .textarea {
        min-height: 100px;
        resize: vertical;
        font-family: inherit;
      }

      /* ========================================
         Container & Layout
         ======================================== */
      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 var(--spacing-md);
      }

      .section {
        padding: var(--spacing-2xl) 0;
      }

      /* ========================================
         Component Specific Styles
         ======================================== */
      .app-header {
        padding: var(--spacing-lg) 0;
        border-bottom: 1px solid var(--border);
        background-color: var(--surface);
      }

      .logo {
        width: 48px;
        height: 48px;
      }

      .qr-display {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 280px;
        padding: var(--spacing-lg);
        background-color: var(--neutral-50);
        border-radius: var(--radius-md);
        border: 2px dashed var(--border);
      }

      #qrcode {
        display: flex;
        justify-content: center;
      }

      #qrcode canvas,
      #qrcode img {
        max-width: 100%;
        height: auto;
        border-radius: var(--radius-md);
      }

      .scanner-container {
        position: relative;
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
      }

      #video {
        width: 100%;
        border-radius: var(--radius-lg);
        border: 2px solid var(--border);
        background-color: var(--neutral-900);
      }

      #canvas {
        display: none;
      }

      .scanner-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 250px;
        height: 250px;
        border: 3px solid var(--primary-500);
        border-radius: var(--radius-lg);
        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        pointer-events: none;
      }

      .scanner-corners {
        position: absolute;
        inset: -3px;
      }

      .scanner-corner {
        position: absolute;
        width: 30px;
        height: 30px;
        border: 4px solid var(--primary-500);
      }

      .scanner-corner.top-left {
        top: 0;
        left: 0;
        border-right: none;
        border-bottom: none;
      }

      .scanner-corner.top-right {
        top: 0;
        right: 0;
        border-left: none;
        border-bottom: none;
      }

      .scanner-corner.bottom-left {
        bottom: 0;
        left: 0;
        border-right: none;
        border-top: none;
      }

      .scanner-corner.bottom-right {
        bottom: 0;
        right: 0;
        border-left: none;
        border-top: none;
      }

      .result-box {
        padding: var(--spacing-md);
        background-color: var(--accent-50);
        border: 2px solid var(--accent-200);
        border-radius: var(--radius-md);
        word-break: break-all;
      }

      .hidden {
        display: none !important;
      }

      /* ========================================
         Responsive Design
         ======================================== */
      @media (min-width: 768px) {
        .container {
          padding: 0 var(--spacing-xl);
        }

        .grid-cols-md-2 {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (max-width: 767px) {
        .text-3xl {
          font-size: 1.5rem;
        }

        .btn-lg {
          padding: var(--spacing-sm) var(--spacing-lg);
          font-size: 1rem;
        }
      }
    </style>

    <script
      src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"
      defer
    ></script>
  </head>

  <body>
    <!-- Header -->
    <header class="app-header">
      <div class="container">
        <div class="flex items-center gap-md">
          <img
            src="https://cdn.jsdelivr.net/gh/Pony-Unicorn/reed/logo.png"
            alt="Reed Logo"
            class="logo"
          />
          <div>
            <h1 class="text-2xl font-bold">Reed</h1>
            <p class="text-sm" style="color: var(--neutral-500)">
              ç«¯åˆ°ç«¯åŠ å¯†ä¼ è¾“å·¥å…·
            </p>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container section">
      <div class="grid grid-cols-1 grid-cols-md-2 gap-xl">
        <!-- Section A: Generate QR Code -->
        <section class="card">
          <h2 class="text-2xl font-semibold mb-lg">ğŸ“¤ ç”ŸæˆäºŒç»´ç </h2>

          <div class="flex flex-col gap-md">
            <div>
              <label
                for="textInput"
                class="text-sm font-medium mb-md"
                style="display: block"
              >
                è¾“å…¥å†…å®¹
              </label>
              <textarea
                id="textInput"
                class="input textarea"
                placeholder="è¾“å…¥è¦ç”ŸæˆäºŒç»´ç çš„å†…å®¹ï¼ˆå¯†ç ã€ç§é’¥ã€åŠ©è®°è¯ç­‰ï¼‰"
              ></textarea>
            </div>

            <button
              id="generateBtn"
              class="btn btn-primary-solid btn-lg"
              onclick="generateQRCode()"
            >
              ğŸ¯ ç”ŸæˆäºŒç»´ç 
            </button>

            <div class="qr-display" id="qrDisplay">
              <div id="qrcode"></div>
              <p
                class="text-sm"
                style="color: var(--neutral-400)"
                id="qrPlaceholder"
              >
                ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”ŸæˆäºŒç»´ç 
              </p>
            </div>

            <div class="flex gap-sm flex-wrap">
              <button
                class="btn btn-accent-soft btn-sm"
                onclick="downloadQRCode()"
                id="downloadBtn"
                style="display: none"
              >
                ğŸ’¾ ä¸‹è½½
              </button>
              <button
                class="btn btn-neutral-outline btn-sm"
                onclick="clearQRCode()"
                id="clearBtn"
                style="display: none"
              >
                ğŸ—‘ï¸ æ¸…é™¤
              </button>
            </div>
          </div>
        </section>

        <!-- Section B: Scan QR Code -->
        <section class="card">
          <h2 class="text-2xl font-semibold mb-lg">ğŸ“¥ æ‰«æäºŒç»´ç </h2>

          <div class="flex flex-col gap-md">
            <div id="scannerSection">
              <button
                id="startScanBtn"
                class="btn btn-primary-solid btn-lg"
                onclick="startScanning()"
                style="width: 100%"
              >
                ğŸ“· å¼€å§‹æ‰«æ
              </button>

              <div id="videoContainer" class="scanner-container mt-lg hidden">
                <video id="video" autoplay playsinline></video>
                <div class="scanner-overlay">
                  <div class="scanner-corners">
                    <div class="scanner-corner top-left"></div>
                    <div class="scanner-corner top-right"></div>
                    <div class="scanner-corner bottom-left"></div>
                    <div class="scanner-corner bottom-right"></div>
                  </div>
                </div>
              </div>

              <div class="flex gap-sm mt-md hidden" id="scanControls">
                <button
                  class="btn btn-accent-solid"
                  onclick="captureAndDecode()"
                  style="flex: 1"
                >
                  âœ… ç¡®å®šæ‰«æ
                </button>
                <button
                  class="btn btn-neutral-outline"
                  onclick="stopScanning()"
                  style="flex: 1"
                >
                  âŒ å–æ¶ˆ
                </button>
              </div>
            </div>

            <canvas id="canvas"></canvas>

            <div id="resultSection" class="hidden">
              <h3 class="text-lg font-semibold mb-md">âœ¨ æ‰«æç»“æœ</h3>
              <div class="result-box">
                <p id="scanResult" style="margin: 0"></p>
              </div>
              <div class="flex gap-sm mt-md">
                <button
                  class="btn btn-primary-soft btn-sm"
                  onclick="copyResult()"
                >
                  ğŸ“‹ å¤åˆ¶
                </button>
                <button
                  class="btn btn-neutral-outline btn-sm"
                  onclick="resetScanner()"
                >
                  ğŸ”„ é‡æ‰«
                </button>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- JavaScript -->
    <script>
      // ========================================
      // Global State
      // ========================================
      let videoStream = null;
      let qrCodeInstance = null;

      // ========================================
      // Section A: Generate QR Code
      // ========================================
      function generateQRCode() {
        const text = document.getElementById("textInput").value.trim();
        const qrContainer = document.getElementById("qrcode");
        const placeholder = document.getElementById("qrPlaceholder");
        const downloadBtn = document.getElementById("downloadBtn");
        const clearBtn = document.getElementById("clearBtn");

        if (!text) {
          alert("è¯·è¾“å…¥å†…å®¹");
          return;
        }

        // Clear previous QR code
        qrContainer.innerHTML = "";
        placeholder.style.display = "none";

        // Generate QR code
        QRCode.toCanvas(
          text,
          {
            width: 256,
            margin: 2,
            color: {
              dark: "#1c1917", // neutral-900
              light: "#ffffff",
            },
            errorCorrectionLevel: "H",
          },
          function (error, canvas) {
            if (error) {
              console.error(error);
              alert("ç”ŸæˆäºŒç»´ç å¤±è´¥");
              placeholder.style.display = "block";
              return;
            }
            qrContainer.appendChild(canvas);
            qrCodeInstance = canvas;
            downloadBtn.style.display = "inline-flex";
            clearBtn.style.display = "inline-flex";
          }
        );
      }

      function downloadQRCode() {
        if (!qrCodeInstance) return;

        const link = document.createElement("a");
        link.download = "qrcode.png";
        link.href = qrCodeInstance.toDataURL();
        link.click();
      }

      function clearQRCode() {
        const qrContainer = document.getElementById("qrcode");
        const placeholder = document.getElementById("qrPlaceholder");
        const downloadBtn = document.getElementById("downloadBtn");
        const clearBtn = document.getElementById("clearBtn");
        const textInput = document.getElementById("textInput");

        qrContainer.innerHTML = "";
        textInput.value = "";
        placeholder.style.display = "block";
        downloadBtn.style.display = "none";
        clearBtn.style.display = "none";
        qrCodeInstance = null;
      }

      // ========================================
      // Section B: Scan QR Code
      // ========================================
      async function startScanning() {
        const videoContainer = document.getElementById("videoContainer");
        const scanControls = document.getElementById("scanControls");
        const startBtn = document.getElementById("startScanBtn");
        const video = document.getElementById("video");

        try {
          // Request camera access
          videoStream = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "environment" },
          });

          video.srcObject = videoStream;

          // Show video and controls
          videoContainer.classList.remove("hidden");
          scanControls.classList.remove("hidden");
          startBtn.style.display = "none";
        } catch (error) {
          console.error("Camera access error:", error);
          alert("æ— æ³•è®¿é—®æ‘„åƒå¤´ï¼Œè¯·ç¡®ä¿å·²æˆäºˆæƒé™");
        }
      }

      function captureAndDecode() {
        const video = document.getElementById("video");
        const canvas = document.getElementById("canvas");
        const resultSection = document.getElementById("resultSection");
        const scanResult = document.getElementById("scanResult");

        // Set canvas size to match video
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        // Draw video frame to canvas
        const context = canvas.getContext("2d");
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        // Get image data
        const imageData = context.getImageData(
          0,
          0,
          canvas.width,
          canvas.height
        );

        // Decode QR code using jsQR
        const code = jsQR(imageData.data, imageData.width, imageData.height, {
          inversionAttempts: "dontInvert",
        });

        if (code) {
          // Successfully decoded
          scanResult.textContent = code.data;
          resultSection.classList.remove("hidden");
          stopScanning();
        } else {
          alert("æœªæ£€æµ‹åˆ°äºŒç»´ç ï¼Œè¯·è°ƒæ•´è§’åº¦åé‡è¯•");
        }
      }

      function stopScanning() {
        const videoContainer = document.getElementById("videoContainer");
        const scanControls = document.getElementById("scanControls");
        const startBtn = document.getElementById("startScanBtn");
        const video = document.getElementById("video");

        // Stop video stream
        if (videoStream) {
          videoStream.getTracks().forEach((track) => track.stop());
          videoStream = null;
        }

        video.srcObject = null;

        // Hide video and controls
        videoContainer.classList.add("hidden");
        scanControls.classList.add("hidden");
        startBtn.style.display = "inline-flex";
      }

      function copyResult() {
        const scanResult = document.getElementById("scanResult");
        const text = scanResult.textContent;

        navigator.clipboard
          .writeText(text)
          .then(() => {
            alert("âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
          })
          .catch((error) => {
            console.error("Copy failed:", error);
            // Fallback for older browsers
            const textarea = document.createElement("textarea");
            textarea.value = text;
            textarea.style.position = "fixed";
            textarea.style.opacity = "0";
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            alert("âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
          });
      }

      function resetScanner() {
        const resultSection = document.getElementById("resultSection");
        const startBtn = document.getElementById("startScanBtn");

        resultSection.classList.add("hidden");
        startBtn.style.display = "inline-flex";
      }

      // ========================================
      // Keyboard Shortcuts
      // ========================================
      document.addEventListener("keydown", function (e) {
        // Ctrl/Cmd + Enter to generate QR code
        if ((e.ctrlKey || e.metaKey) && e.key === "Enter") {
          const textInput = document.getElementById("textInput");
          if (document.activeElement === textInput && textInput.value.trim()) {
            generateQRCode();
          }
        }
      });

      // ========================================
      // Cleanup on page unload
      // ========================================
      window.addEventListener("beforeunload", function () {
        if (videoStream) {
          videoStream.getTracks().forEach((track) => track.stop());
        }
      });
    </script>
  </body>
</html>
